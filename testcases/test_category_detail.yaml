config:
  name: Category Detail
  base_url: ${ENV(BASE_URL)}
  tags: [catalog]
steps:
  - name: list categories
    request:
      method: GET
      url: /api/v1/categories/
    extract:
      category_id: $.data[0].id
    validate:
      - eq: [status_code, 200]
      - eq: [$.success, true]
      - eq: [$.code, 200]
      - eq: [$.message, "获取分类列表成功"]
      - gt: ["$.data[0].id", 0]
      - contains: ["$.data[0]", "name"]

  - name: get category by id
    request:
      method: GET
      url: /api/v1/categories/$category_id
    validate:
      - eq: [status_code, 200]
      - eq: [$.success, true]
      - eq: [$.code, 200]
      - eq: [$.message, "获取分类详情成功"]
      - eq: [$.data.id, $category_id]
