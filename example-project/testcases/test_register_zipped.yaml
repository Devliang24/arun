config:
  name: 注册账号（压缩参数化）
  base_url: ${ENV(BASE_URL)}
  tags: [auth, register, params]
  parameters:
    - username-email-full_name-password-shipping_address:
        - [alice_${short_uid(6)}, alice_${short_uid(6)}@example.com, Alice_${short_uid(6)}, Pwd_Alice_${short_uid(6)}, Addr_Alice_${short_uid(6)}]
        - [bob_${short_uid(6)}, bob_${short_uid(6)}@example.com, Bob_${short_uid(6)}, Pwd_Bob_${short_uid(6)}, Addr_Bob_${short_uid(6)}]
        - [charlie_${short_uid(6)}, charlie_${short_uid(6)}@example.com, Charlie_${short_uid(6)}, Pwd_Charlie_${short_uid(6)}, Addr_Charlie_${short_uid(6)}]

steps:
  - name: 注册
    request:
      method: POST
      url: /api/v1/auth/register
      headers:
        Accept: application/json
        Content-Type: application/json
      body:
        username: $username
        email: $email
        password: $password
        full_name: $full_name
        shipping_address: $shipping_address
    validate:
      - in: [status_code, [200, 201]]
      - eq: [$.success, true]
      - eq: [$.message, 用户注册成功]
      - eq: [$.data.username, $username]
      - eq: [$.data.email, $email]
